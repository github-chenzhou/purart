webpackJsonp([4],{"/Ddw":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._v(" "),n("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),n("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("Core Docs")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("Forum")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("Community Chat")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("Twitter")])]),t._v(" "),n("br"),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("Docs for This Template")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[t._v("vue-router")])]),t._v(" "),n("li",[n("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[t._v("vuex")])]),t._v(" "),n("li",[n("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[t._v("vue-loader")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[t._v("awesome-vue")])])])}],o={render:s,staticRenderFns:a};e.a=o},"1EqF":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],o={render:s,staticRenderFns:a};e.a=o},"6VMI":function(t,e){},"D/cR":function(t,e,n){"use strict";var s=n("fZjL"),a=n.n(s),o=n("//Fk"),i=n.n(o),r=n("mtWM"),u=n.n(r),c=n("lbHh"),l=n.n(c);!i.a&&n.e(2).then(function(){var t=[n("0Qa9")];(function(t){window.Promise=window.Promise||t}).apply(null,t)}).catch(n.oe);var d=function(t){if(t.data.success||0===t.data.status)return i.a.resolve(t.data);if("redirect"===t.data.op){var e=t.data.url,n=e.indexOf("next="),s=e.substring(0,n);return s+="next="+location.pathname,void setTimeout(function(){location.href="//"+location.host+s},500)}if(1!==t.data.status_code&&2!==t.data.status_code&&4!==t.data.status_code||(location.href="/v/index/course/normalcourse/error/"+t.data.status_code),5===t.data.status_code){var a=location.href;location.href="/v/index/edituserinfo_simple?next_url="+a}return i.a.reject(t.data)};e.a={get:function(t,e){e=e||{};var n=[];return a()(e).forEach(function(t){return e[t]&&n.push(t+"="+e[t])}),n.length>0&&(n=n.join("&"),t+="?"+n),u.a.get(t).then(function(t,e){return t}).then(d).catch(function(t){return i.a.reject(t)})},post:function(t,e){return e=e||{},u.a.defaults.headers["X-CSRFToken"]=l.a.get("csrftoken")||"",u.a.post(t,e).then(function(t,e){return t}).then(d).catch(function(t){return i.a.reject(t)})}}},M93x:function(t,e,n){"use strict";function s(t){n("c5lB")}var a=n("xJD8"),o=n("1EqF"),i=n("VU/8"),r=s,u=i(a.a,o.a,r,null,null);e.a=u.exports},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),a=n("M93x"),o=n("YaEn");s.a.config.productionTip=!1,new s.a({el:"#app",router:o.a,template:"<App/>",components:{App:a.a}})},Qt9A:function(t,e,n){"use strict";function s(t){n("6VMI")}var a=n("x2x/"),o=n("e15U"),i=n("VU/8"),r=s,u=i(a.a,o.a,r,null,null);e.a=u.exports},YaEn:function(t,e,n){"use strict";var s=n("7+uW"),a=n("/ocq"),o=(n("qSdX"),n("Qt9A"));s.a.use(a.a);var i=new a.a({base:"/",mode:"hash",routes:[{path:"/",name:"Index",component:o.a},{path:"/:lessonID",name:"student-presentation-page",component:o.a,children:[{path:"hongbao/:index",name:"student-hongbao-page",component:o.a}]}]});i.beforeEach(function(t,e,n){n()}),i.afterEach(function(t){setTimeout(function(){"function"==typeof ga&&ga("send","pageview",location.pathname)},1e3)}),e.a=i},c5lB:function(t,e){},d1wj:function(t,e,n){"use strict";var s=void 0;s={GET_USER_INFO:"/v/lesson/lesson_user_info",GET_SOFT_VERSION:"/v/lesson/lesson_ppt_version",student:{GET_PRESENTATION_LIST:"/v/lesson/lesson_info_v2",GET_RED_ENVELOPE_DETAIL:"/api/red/red_envelope_detail/",ANSWER_LESSON_PROBLEM:"/v/lesson/answer_lesson_problem",RETRY_ANSWER_LESSON_PROBLEM:"/v/lesson/retry_answer_lesson_problem",PROBLEM_SCORE:"/v/lesson/subjective_problem_student_info",FETCH_PRESENTATION_DATA:"/lesson/fetch_presentation_data/",SET_LEESON_SILDE_TAG:"/v/lesson/post_studentlessonslide_tag",SEND_DANMU:"/v/api/danmu/send_danmu",SEND_SUBMISSION:"/v/api/tougao/create",GET_SUBMISSION_LIST:"/v/api/tougao/student/list",DELETE_SUBMISSION:"/v/api/tougao/delete",UPLOAD_PIC:"/v/api/tougao/pic_upload",GET_SUBMISSION:"/v/api/tougao/tougao_info",AUDIT_CLASSROOM:"/edu_admin/audit_classroom/"},market:{user_info:"/v/course_meta/user_info",get_rain_courseware_list:"/v/rain_courseware/get_rain_courseware_list/",rain_courseware_list:"/v/rain_courseware/rain_courseware_list/",bind_serial_number:"/v/rain_courseware/bind_serial_number/"}},e.a=s},e15U:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"page",on:{click:t.handleFilter}},[n("section",{staticClass:"page-fixed"},[n("header",{staticClass:"student__header"},[n("p",{staticClass:"student__header--back",on:{click:t.handleBack}},[n("i",{staticClass:"iconfont icon-fanhui f25"})]),t._v(" "),n("h3",{staticClass:"header-title f18"},[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"student__header--more J_more",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.handleMoreActions(e)}}},[n("i",{staticClass:"iconfont icon-add f25"}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isMore,expression:"isMore"}],class:["more-actions","animated",1==t.isMore?"slideInDown":"slideInUp"]},[n("p",{staticClass:"action f17 line",on:{click:t.handleOpenDanmu}},[n("i",{staticClass:"iconfont icon-ykq_tab_danmu f25"}),t._v("发送弹幕")]),t._v(" "),t.version>.8?n("router-link",{staticClass:"action f17",attrs:{to:"/"+t.lessonID+"/submission/",tag:"p"}},[n("i",{staticClass:"iconfont icon-ykq_tab_tougao f25"}),t._v("发送投稿")]):t._e()],1)])]),t._v(" "),n("ul",{staticClass:"student__tabs f15",on:{click:t.handleShowTab}},[n("li",{class:["tab-item",1==t.currTabIndex?"curr":""],attrs:{"data-index":"1","data-language-key":"student.nav.all"}},[t._v("全部")]),t._v(" "),n("li",{class:["tab-item",2==t.currTabIndex?"curr":""],attrs:{"data-index":"2","data-language-key":"student.nav.ppt"}},[t._v("PPT")]),t._v(" "),n("li",{class:["tab-item",3==t.currTabIndex?"curr":""],attrs:{"data-index":"3","data-language-key":"student.nav.problem"}},[t._v("习题")]),t._v(" "),n("li",{class:["tab-item",4==t.currTabIndex?"curr":""],attrs:{"data-index":"4","data-language-key":"student.nav.quiz"}},[t._v("试卷")]),t._v(" "),n("li",{class:["tab-item",5==t.currTabIndex?"curr":""],attrs:{"data-index":"5","data-language-key":"student.nav.hongbao"}},[t._v("红包")])])]),t._v(" "),n("section",{staticClass:"student__timeline-wrapper"},[n("loadmore",{ref:"loadmore",staticClass:"J_timeline",attrs:{"top-method":t.refeshLoad,"top-status":t.topStatus,"top-distance":t.topDistance},on:{"translate-change":t.translateChange,"update:topStatus":function(e){t.topStatus=e},"update:topDistance":function(e){t.topDistance=e}}},[n("section",{staticClass:"student__timeline J_cards"},t._l(t.cards,function(e,s){return n("div",{staticClass:"timeline-wrapper"},[t.currTabIndex===e.type||1===t.currTabIndex?n("Card-Item-Component",{attrs:{item:e,index:s,lessonid:t.lessonID,tabindex:t.currTabIndex}}):t._e()],1)}))])],1),t._v(" "),n("section",{directives:[{name:"show",rawName:"v-show",value:t.hasMsg,expression:"hasMsg"}],staticClass:"student__msg f16",on:{click:t.handleScrollToTop}},[n("p",{},[t._v("您有新的课堂动态")])]),t._v(" "),n("section",{staticClass:"student__msgbox"},t._l(t.msgBoxs,function(e,s){return n("div",{},[n("Popup-Component",{attrs:{item:e,index:s,lessonid:t.lessonID}})],1)})),t._v(" "),t._m(0),t._v(" "),n("router-view")],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"pswp J_pswp",attrs:{tabindex:"-1",role:"dialog","aria-hidden":"true"}},[n("div",{staticClass:"pswp__bg"}),t._v(" "),n("div",{staticClass:"pswp__scroll-wrap"},[n("div",{staticClass:"pswp__container"},[n("div",{staticClass:"pswp__item"}),t._v(" "),n("div",{staticClass:"pswp__item"}),t._v(" "),n("div",{staticClass:"pswp__item"})]),t._v(" "),n("div",{staticClass:"pswp__ui pswp__ui--hidden"},[n("div",{staticClass:"pswp__top-bar"},[n("div",{staticClass:"pswp__counter"}),t._v(" "),n("div",{staticClass:"pswp__preloader"},[n("div",{staticClass:"pswp__preloader__icn"},[n("div",{staticClass:"pswp__preloader__cut"},[n("div",{staticClass:"pswp__preloader__donut"})])])])]),t._v(" "),n("div",{staticClass:"pswp__caption"},[n("div",{staticClass:"pswp__caption__center"})])])])])}],o={render:s,staticRenderFns:a};e.a=o},pMZz:function(t,e,n){"use strict";e.a={name:"hello",data:function(){return{msg:"Welcome to Your Vue.js App"}}}},qSdX:function(t,e,n){"use strict";function s(t){n("tzMI")}var a=n("pMZz"),o=n("/Ddw"),i=n("VU/8"),r=s,u=i(a.a,o.a,r,"data-v-67db12df",null);u.exports},tzMI:function(t,e){},wmyp:function(t,e,n){"use strict";function s(){o.a.post("/v/course_meta/weixin_index_parameter",{url:location.href}).then(function(t){console.log("weixin configing",t);var e=t.data.js_config;wx.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","showMenuItems","translateVoice","startRecord","stopRecord","onVoiceRecordEnd","playVoice","onVoicePlayEnd","pauseVoice","stopVoice","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","getNetworkType","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard","hideMenuItems"]})}).catch(function(){console.error("微信配置失败")})}n.d(e,"a",function(){return s});var a=n("mvHQ"),o=(n.n(a),n("D/cR"))},"x2x/":function(t,e,n){"use strict";var s=n("mvHQ"),a=n.n(s),o=n("//Fk"),i=n.n(o),r=n("ifoU"),u=n.n(r),c=n("D/cR"),l=n("d1wj"),d=n("yt7g"),_=(n.n(d),n("wmyp"));window.request=c.a,e.a={name:"student-page",props:{},data:function(){return{isResetSocket:!1,socket:null,isReconnect:!1,reconnectcount:0,countdown:10,topStatus:"",topDistance:120,title:"雨课堂",courseName:"",lessonID:0,presentationID:0,msgid:1,userID:0,avatar:"",userAuth:0,currTabIndex:1,hasMsg:!1,observerMode:!1,danmuStatus:!1,lessonStatus:0,presentationList:null,presentationMap:new u.a,quizList:null,quizMap:new u.a,problemMap:new u.a,cards:[],msgBoxs:[],allEvents:[],timeline:{problem:{}},isMore:!1,version:.9,commitDiffURL:"/lesson/lesson_submit_difficulties",backURL:"",pro_perm_info:{}}},components:{},computed:{},watch:{$route:function(t,e){var n=this;"student-danmu-page"!=e.name&&"student-submission-page"!=e.name||(document.title=this.courseName&&this.courseName,setTimeout(function(){"function"==typeof n.handleScrollToTop&&n.handleScrollToTop()},300))},lessonStatus:function(t,e){1===t&&(this.backURL="/v/index/course/normalcourse/learning_lesson_detail/"+this.lessonID)}},filters:{},mixins:[wsmixin,actionsmixin,exercisemixin],methods:{init:function(){this.lessonID=this.$route.params.lessonID||3049,this.observerMode=!(!this.$route.query||"lecture"!==this.$route.query.force),this.iniTimeline(this.lessonID),this.getSoftVersion(this.lessonID),n.i(_.a)(),wx&&wx.ready(function(){wx.hideMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:favorite","menuItem:share:QZone"]})})},iniTimeline:function(t){var e=this,s=this;i.a.all([this.getPresentationList()]).then(function(t){s.initws(),setTimeout(function(){n.e(1).then(function(){var t=[n("hLg7"),n("fzln"),n("2jnm")];(function(t,e){window.PhotoSwipe=t,window.PhotoSwipeUI_Default=e}).apply(null,t)}).catch(n.oe)},1500),setTimeout(function(){n.e(0).then(function(){var t=[n("PJh5")];(function(t){window.moment=t}).apply(null,t)}).catch(n.oe)},2500),setInterval(function(){s.autoSendAnswers()},1e4),s.bindTouchEvents(),e.setSentry()})},setSentry:function(){var t=this;"undefined"!=typeof Raven?(Raven.config("http://1a033df516274a349716c21d7d4ce6b2@rain-sentry.xuetangx.com/4").install(),Raven.setUserContext({userid:this.userID})):setTimeout(function(){Raven.config("http://1a033df516274a349716c21d7d4ce6b2@rain-sentry.xuetangx.com/4").install(),Raven.setUserContext({userid:t.userID})},1500),"function"==typeof ga&&ga("set","userId",this.userID)},getUserInfo:function(t){var e=this,n=l.a.GET_USER_INFO,s={lesson_id:t};return c.a.get(n,s).then(function(t){if(t&&t.data){var n=t.data;return e.userID=n.user_id,e.avatar=n.avatar,e.userAuth=n.user_auth,n}})},getPresentationList:function(){var t=this,e=this,n=l.a.student.GET_PRESENTATION_LIST,s={lesson_id:this.lessonID};return c.a.get(n,s).then(function(t){if(t&&t.data){var n=t.data;if(e.pro_perm_info=n.pro_perm_info,e.userID=n.userID,e.avatar=n.avatar,e.userAuth=n.userAuth,e.presentationList=n.presentationList,e.quizList=n.quizList,e.presentationID=n.activePresentationID,e.classroom=n.classroom,e.presentationList.length)for(var s=0;s<e.presentationList.length;s++){var a=e.presentationList[s];e.formatPresentation(a,a.presentationID)}e.quizList&&e.quizList.length&&e.quizList.forEach(function(t,n){e.quizMap.set(t.quizID,t)});var o=e.presentationMap.get(e.presentationID);return o.Title&&(e.title=o.Title),document.title=e.courseName=n.classroom&&n.classroom.courseName,o}}).catch(function(e){console.log(e),e&&601===e.status_code?(console.log("课程结束"),location.href="/v/index/course/normalcourse/learning_lesson_detail/"+t.lessonID):e&&603===e.status_code&&console.log("没有权限")})},getUpdatePPTData:function(t){var e=this,n=l.a.student.FETCH_PRESENTATION_DATA,s={lessonID:this.lessonID,presentationID:t,userAuth:this.userAuth,userID:this.userID};return n+=t,e.presentationID=t,c.a.get(n,s).then(function(n){if(n){var s=n,a=s.presentationData;return e.formatPresentation(a,t),a.Title&&(e.title=a.Title),a}})},formatPresentation:function(t,e){if(t){var n=t.Slides;n.length&&(n.forEach(function(t,e){t.tag&&t.tag.length&&t.tag.forEach(function(e){1===e&&(t.question=1),2===e&&(t.store=1)}),t.Problem&&t.Result&&(t.Problem.Result=t.Result)}),t.Slides=n),this.presentationMap.set(e||t.presentationID,t)}},refeshLoad:function(t){var e=this;setTimeout(function(){e.$refs.loadmore.onTopLoaded(),e.socket&&1===e.socket.readyState&&e.socket.send(a()({op:"fetchtimeline",lessonid:e.lessonID,msgid:e.msgid++}))},1500)},translateChange:function(t){"loading"===this.$refs.loadmore.topStatus&&(this.$refs.loadmore.translate=100)},handleTouchMove:function(t){var e="undefined"!=typeof event&&event.currentTarget||t.currentTarget;this.hasMsg&&e.scrollTop<200&&(this.hasMsg=!1)},bindTouchEvents:function(){this.$el.querySelector(".J_timeline").addEventListener("touchmove",this.handleTouchMove),this.$el.querySelector(".J_timeline").addEventListener("touchend",this.handleTouchMove)},unbindTouchEvents:function(){this.$el.querySelector(".J_timeline").removeEventListener("touchmove",this.handleTouchMove),this.$el.querySelector(".J_timeline").removeEventListener("touchend",this.handleTouchMove)},handleShowTab:function(t){var e="undefined"!=typeof event&&event.target||t.target,n=+e.dataset.index;n&&(this.currTabIndex=n)},handleMoreActions:function(){this.isMore?this.isMore=!1:this.isMore=!0},handleOpenDanmu:function(){this.danmuStatus?this.$router.push({path:"/"+this.lessonID+"/danmu"}):this.$messagebox("提示","老师暂时还未开放弹幕，等等吧～")},handleScrollToTop:function(){this.$el.querySelector(".J_cards").scrollIntoView(),this.hasMsg=!1},handleReconnect:function(){clearInterval(this.reconnectTimer),this.countdown=10,this.initws(!0)},handleFilter:function(t){"undefined"!=typeof event&&event.target||t.target;this.isMore=!1},handleBack:function(){this.backURL?location.href=this.backURL:this.classroom&&this.classroom.courseId?location.href="/v/index/course/normalcourse/manage_classroom/"+this.classroom.courseId+"/"+this.classroom.classroomId:this.$router.back()}},created:function(){this.init()},mounted:function(){},updated:function(){window.language&&window.language.translate(this.$el)},beforeDestroy:function(){this.unbindTouchEvents()}}},xJD8:function(t,e,n){"use strict";e.a={name:"purart-app"}},yt7g:function(t,e){Array.prototype.find||(Array.prototype.find=function(t){"use strict";if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),s=n.length>>>0,a=arguments[1],o=0;o<s;o++)if(e=n[o],t.call(a,e,o,n))return e})}},["NHnr"]);
//# sourceMappingURL=app.784593f3d78c720bb13b.js.map